<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1" name=viewport><title>Local Weather App</title><link href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css rel=stylesheet><link href=https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Nunito" rel=stylesheet><style>body,html,main{height:100%;font-family:Nunito,sans-serif}.main-col,.main-row{background-color:#000;height:100%}.main-col{position:relative}.wallpaper{position:absolute;width:100%;height:100%;margin:0 -15px;background-repeat:no-repeat;background-position:center;background-size:cover}.wallpaper-front{display:none}.weather-shadow,.weather-wrapper{position:absolute;width:45%;height:100%;margin:0 -15px}.weather-shadow{opacity:.5;background-color:#000}.weather-wrapper{display:flex;flex-direction:column;color:#fff;padding:2em 1em}.grow{flex-grow:1}.weather-header{display:flex;flex-wrap:wrap;flex-grow:1;width:100%}.weather-icon{font-size:5em;margin:0 auto}.weather-push-right{margin:0 auto}.weather-location{font-size:2em}.weather-location-details{position:relative;top:-.5em;font-size:.5em}.weather-temp{font-size:2em;margin-top:.5em}.btn-group button{font-size:1.8em;font-weight:700;width:1.8em;height:1.8em;border-radius:50%}.btn-group .active{background-color:#333;color:#fff}@media screen and (min-width:1024px){.weather-shadow,.weather-wrapper{width:37%}}@media screen and (min-width:768px){.weather-icon{font-size:6em}.weather-temp{font-size:2.2em}}</style><link href=css/weather-icons.css rel=stylesheet><link href=css/weather-icons-wind.css rel=stylesheet><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js></script><script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]--></head><body><main class=container-fluid><div class="main-row row"><div class="col-xs-12 main-col"><div class="wallpaper wallpaper-back" data-bind="toggleBackground: backgroundUrl"></div><div class="wallpaper wallpaper-front" data-bind="toggleBackground: backgroundUrl"></div><div class=weather-shadow></div><div class=weather-wrapper><div class=grow><div class=weather-header><div class=weather-icon><i data-bind="attr: { class: weatherIcon }"></i></div><div class=weather-push-right><div class=weather-location><div data-bind="text: cityName" id=location></div><div class=weather-location-details data-bind="text: detailsPosition" id=location-details></div></div><div class=weather-temp><div class=weather-temp-inner><i class="wi wi-thermometer"></i> <span data-bind="text: temp" id=temp></span> <i data-bind="css: unit() == 'celsius' ? 'wi wi-celsius' : 'wi wi-fahrenheit'"></i></div></div></div></div></div><div class="switch-unit text-center"><div class=btn-group aria-label=... role=group><button class="btn btn-default" data-bind="click: toggleUnit, css: { active: unit() == 'celsius' }" type=button><i class="wi wi-celsius"></i></button> <button class="btn btn-default" data-bind="click: toggleUnit, css: { active: unit() == 'fahrenheit' }" type=button><i class="wi wi-fahrenheit"></i></button></div></div></div></div></div></main><script src=https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js></script><script>$(function(){"use strict";function t(t){var e=["winter","spring","summer","fall"],n=Math.floor(3*Math.random())+1;return void 0===t&&(t=e[Math.floor(4*Math.random())]),"img/"+t+"-0"+n+".jpg"}function e(e){var n="";return n=e<5?"winter":e<15?"fall":e<25?"spring":"summer",t(n)}function n(){return new Promise(function(t,e){if("geolocation"in navigator){console.log("Gelocation enabled.");var n={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};navigator.geolocation.getCurrentPosition(function(n){var r={},c={lat:n.coords.latitude,lon:n.coords.longitude},a=o.replace(/{key}/,i).replace(/{lat}/,c.lat).replace(/{lon}/,c.lon);$.getJSON(a,function(e){console.log(e),r.city=e.location.name,r.country=e.location.country,r.region=e.location.region,r.temp_c=e.current.temp_c,r.temp_f=e.current.temp_f,r.humidity=e.current.humidity,r.precip=e.current.precip_mm,r.pressure=e.current.pressure_mb,r.visibility=e.current.vis_mk,r.wind_kph=e.current.wind_kph,r.wind_dir=e.current.wind_dir,r.clouds=e.current.cloud,t(r)}).fail(function(){e("Apiux isn't responding now.")})},function(t){console.warn("error "+t.code+", "+t.message),e("Wasn't possible get the geographic possition.")},n)}else e(Error("Geolocation is not enabled"))})}var i="91f999f0561d4d7a9b3155126171406",o="https://api.apixu.com/v1/current.json?key={key}&q={lat},{lon}",r={};ko.bindingHandlers.toggleBackground={update:function(t,e){var n=$(t),i=n.css("display"),o=ko.unwrap(e());o&&("block"===i?n.fadeOut(800):(n.css("background-image","url('"+o+"')"),n.fadeIn(800)))}},ko.applyBindings(new function(){var i=this,o=n();this.backgroundUrl=ko.observable(t()),this.weatherIcon=ko.observable("wi wi-day-cloudy-gusts"),this.cityName=ko.observable("City"),this.detailsPosition=ko.observable("Region, Country"),this.temp=ko.observable("Temp"),this.unit=ko.observable("celsius"),this.toggleUnit=function(){"celsius"===this.unit()?(this.unit("fahrenheit"),this.temp(r.temp_f)):(this.unit("celsius"),this.temp(r.temp_c))},o.then(function(t){console.log(JSON.stringify(t)),r=t,i.backgroundUrl(e(r.temp_c)),i.cityName(r.city),i.detailsPosition(r.region+", "+r.country),"celsius"===i.unit()?i.temp(r.temp_c):i.temp(r.temp_f)}).catch(function(t){alert(t)})})})</script></body></html>